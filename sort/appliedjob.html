<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Database</title>
    <link rel="stylesheet" href="commonstyle.css" />
  </head>

  <body>
    <div id="links">
      <div><a href="index.html">Home</a></div>
      <div><a href="appliedjob.html">Applied Jobs</a></div>
      <div><a href="bookmark.html">Bookmarks</a></div>
    </div>
    
    
    <select id="sortName">
      <option value="sort by Name">sort by Name</option>
      <option value="accending">Accending</option>
      <option value="deccending">deccending</option>
   </select>

    <main>
      <table>
        <thead>
          <tr>
            <th>Name</th>
            <th>Email</th>
            <th>Job applied</th>
            <th>Salary expected</th>
            <th>Add to bookmark</th>
          </tr>
        </thead>
        <tbody id="body">
          <!-- Append your output to tbody -->
        </tbody>
      </table>
    </main>
  </body>
  <script>
    //you need to code here
    let bookmarkArr=JSON.parse(localStorage.getItem("bookmark"))||[]
    let appliedjobs=JSON.parse(localStorage.getItem("jobList"));
    
// console.log(appliedjobs)

document.querySelector("#sortNmae")
addEventListener("change",handleSortName)
   function handleSortName(){
    let selected=document.querySelector("#sortName").value;
      // console.log(selected)
    if(selected=="accending"){
        appliedjobs.sort(function(a,b){
          // console.log(a,b)
            let x =a.personName.toUpperCase();
            let y=b.personName.toUpperCase();
            // console.log(x,y)
            if(x > y)return 1;
            if(x < y)   return -1;
            return 0
        })
        // console.log("asc",appliedjobs)
        displayTable(appliedjobs)
    }
    else if(selected=="deccending"){
        appliedjobs.sort(function(a,b){
          let x =a.personName.toUpperCase();
            let y=b.personName.toUpperCase();
            if(x > y)return -1
            if(x < y)   return 1
            return 0
        })
        // console.log("des",appliedjobs)
        displayTable(appliedjobs)
       
   }
  else if(selcted="sort by Name"){
    let appliedjobs=JSON.parse(localStorage.getItem("jobList"));
    // console.log("def",appliedjobs)
    displayTable(appliedjobs);
  }
 
    }
    function displayTable(appliedjobs){
      document.querySelector("#body").innerHTML=""

    appliedjobs.forEach(function(ele){
      let tr=document.createElement("tr");
    let td1=document.createElement("td");
    let td2=document.createElement("td");
    let td3=document.createElement("td");
    let td4=document.createElement("td");
    let button=document.createElement("button");
    button.innerText="bookmark"
  button.addEventListener("click",function(){
    let x={
      name:ele.personName,
      email:ele.personEmail,
      roll:ele.personRole,
      salary:ele.personSalary,

    }
    bookmarkArr.push(x)
    localStorage.setItem("bookmark",JSON.stringify(bookmarkArr))
    alert("bookmark")
    window.location.href = "bookmark.html"
  })
    // let td5=document.createElement("td");
     td1.innerText=ele. personName;
     td2.innerText=ele.personEmail;
     td3.innerText=ele. personRole;
     td4.innerText=ele. personSalary;
     tr.append(td1,td2,td3,td4,button)
       button.style.padding="10px";
       button.style.background="teal"
     document.querySelector("#body").append(tr)
      
    });
  }

    // localStorage.clear()
   
    displayTable(appliedjobs);
    console.log("last")

    

  </script>
</html>
